<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ejercicio Local Storage</title>
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>
<body>
    <!-- 
        1. Formulario que permita aÃ±adir peliculas
     -->
    <div class="container">
        <form action="" class="form card col-md-6 mx-auto" id="form" enctype="multipart/form-data">

            <div class="card-header">
                Registro de pelicula
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="exampleInputPassword1" class="form-label">Nombre</label>
                    <input type="text" name="name" class="form-control">
                </div>
                <div class="mb-3">
                    <label for="image" class="form-label">Imagen</label>
                    <input type="file" class="form-control" name="image">
                </div>
                <input type="submit" value="Guardar" class="btn btn-success">
            </div>
        </form>        
    </div>
    <div class="card mt-3 col-md-6 mx-auto">
        <div class="card-header">
            Mis peliculas
        </div>
        <ul class="list-group" id="lista">
            <li class="list-group-item active" aria-curent="true">Hola</li>
        </ul>
    </div>
    <div class="card mt-3 col-md-6 mx-auto">
        <form action="" class="form card" id="form-delete" enctype="multipart/form-data">
            <div class="card-header">
                Borrar pelicula
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="nombre" class="form-label">Pelicula</label>
                    <input type="text" class="form-control" name="nombre">
                </div>
                <input type="submit" value="Borrar" class="btn btn-danger">
            </div>
        </form>  
    </div>
    <script>
        'use strict'
        const $form = document.getElementById('form');
        const $form_delete = document.getElementById('form-delete');
        const $lista = document.getElementById('lista');
        $form.addEventListener('submit',(event)=>{
            // event.preventDefault();
            let data = new FormData($form);
            let name = data.get('name');
            localStorage.setItem(name,name);
        });
        $form_delete.addEventListener('submit',(event)=>{
            // event.preventDefault();
            let data = new FormData($form_delete);
            let name = data.get('nombre');
            console.log(name)
            localStorage.removeItem(name);
        });
        let cad = '';
        for(var i in localStorage){
            if(typeof(localStorage[i]) == 'string')
            cad += '<li class="list-group-item">'+i+'</li>';
        };
        $lista.innerHTML = cad;
    </script>    
</body>
</html>